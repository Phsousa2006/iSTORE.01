<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iStore | Premium</title>
    <style>
        :root {
            --apple-black: #000000; 
            --apple-blue: #0071e3;
            --apple-dark-blue: #003366;
            --white: #ffffff;
            --card-bg: #0c0c0c; 
            --border-color: #252525; 
        }

        @keyframes waveMove {
            from { transform: translateX(0); }
            to { transform: translateX(-50%); }
        }

        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
            margin: 0; color: var(--white); background-color: var(--apple-black); overflow-x: hidden;
        }

        /* FUNDO ANIMADO */
        .sea-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background: var(--apple-black); }
        .wave-svg { position: absolute; width: 200%; height: 100%; top: 0; left: 0; fill: none; stroke-width: 1.8; animation: waveMove 40s linear infinite; }

        /* NAVEGAÇÃO */
        nav { 
            background: rgba(0, 0, 0, 0.95); backdrop-filter: blur(20px); 
            padding: 0 5%; height: 75px; display: flex; align-items: center; justify-content: space-between;
            position: fixed; top: 0; left: 0; right: 0; z-index: 5000;
            border-bottom: 1px solid var(--border-color);
        }
        .logo { font-size: 1.5rem; font-weight: 600; cursor: pointer; min-width: 120px; }

        .nav-search {
            flex: 1; max-width: 400px; margin: 0 20px; opacity: 0; visibility: hidden;
            transition: all 0.3s ease; transform: translateY(-10px);
        }
        .nav-search.visible { opacity: 1; visibility: visible; transform: translateY(0); }
        .nav-search input { 
            width: 100%; padding: 8px 20px; border-radius: 20px; border: 1px solid #333; 
            background: rgba(255,255,255,0.1); color: white; outline: none;
        }

        .container { max-width: 1400px; margin: 0 auto; padding: 120px 20px 150px; position: relative; }
        
        /* BUSCA PRINCIPAL */
        .search-filter-container { 
            margin: 30px auto 40px; max-width: 600px; text-align: center;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .search-filter-container.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
        .search-box { width: 100%; padding: 15px 25px; border-radius: 35px; border: 1px solid #333; background: rgba(255,255,255,0.1); color: white; font-size: 1.1rem; outline: none; box-sizing: border-box; }
        
        .filter-group { margin-top: 20px; display: flex; justify-content: center; gap: 10px; }
        .filter-btn { padding: 8px 20px; border-radius: 20px; border: 1px solid #333; background: none; color: white; cursor: pointer; transition: 0.3s; }
        .filter-btn.active { background: var(--apple-blue); border-color: var(--apple-blue); }

        /* GRID E CARDS */
        .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        @media (min-width: 1024px) { .grid { grid-template-columns: repeat(4, 1fr); gap: 30px; } }
        
        .card { 
            background: var(--card-bg); border-radius: 30px; padding: 20px; text-align: center; 
            border: 1px solid var(--border-color); transition: 0.4s ease; cursor: pointer; position: relative;
            display: flex; flex-direction: column; justify-content: space-between; align-items: center;
            padding-top: 55px;
        }
        .card:hover { border-color: #555; transform: translateY(-5px); box-shadow: 0 10px 40px rgba(0,113,227,0.15); }

        .img-container {
            width: 100%; height: 380px; background: #fff; border-radius: 35px;
            display: flex; justify-content: center; align-items: center;
            margin-bottom: 25px; overflow: hidden; position: relative; margin-top: 10px;
        }
        
        .card img { width: 100%; height: 100%; object-fit: cover; object-position: center; transition: transform 0.5s ease; }

        /* ETIQUETAS (BADGES) - Ajustadas em +30% */
        .badge { 
            position: absolute; top: 18px; left: 18px; padding: 6px 16px; border-radius: 14px; 
            font-size: 0.8rem; font-weight: 700; z-index: 10; text-transform: uppercase;
            letter-spacing: 0.6px;
        }
        .badge-novo { background: var(--apple-blue); color: white; }
        .badge-seminovo { background: #333; color: #d1d1d1; }
        
        .product-info { margin-top: 5px; width: 100%; text-align: left; padding: 0 5px; overflow: hidden; }
        .product-info h3 { 
            font-size: 0.85rem; margin: 0; color: #ccc; font-weight: 400; letter-spacing: 0.2px; 
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis; 
        }
        .price { font-size: 1.4rem; font-weight: 700; margin: 5px 0; color: #fff; }
        .btn-details { background: white; color: black; border: none; padding: 12px; border-radius: 40px; font-weight: 700; width: 100%; cursor: pointer; margin-top: 10px; }

        @media (max-width: 600px) { 
            .card { padding: 12px; padding-top: 45px; border-radius: 25px; }
            .img-container { height: 200px; border-radius: 20px; } 
            .product-info h3 { font-size: 0.75rem; }
            .price { font-size: 1.15rem; }
            .badge { top: 12px; left: 12px; padding: 4px 12px; font-size: 0.7rem; }
        }

        /* DETALHES E ADMIN */
        #product-page { display: none; position: fixed; inset: 0; background: #000; z-index: 4500; overflow-y: auto; padding: 120px 40px 40px; }
        .specs-list { list-style: none; padding: 0; margin: 20px 0; border-top: 1px solid #333; }
        .specs-list li { padding: 15px 0; border-bottom: 1px solid #222; display: flex; justify-content: space-between; color: #aaa; }
        .specs-list li b { color: #fff; }

        #admin-section, #login-section { display: none; position: fixed; inset: 0; background: #f5f5f7; color: black; z-index: 9000; overflow-y: auto; padding: 40px; }
        .admin-form { background: white; padding: 30px; border-radius: 25px; max-width: 500px; margin: 0 auto; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .admin-form input, .admin-form select, .admin-form textarea { width: 100%; padding: 12px; margin-bottom: 15px; border-radius: 8px; border: 1px solid #ccc; box-sizing: border-box; }
        .admin-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #eee; }
        
        footer { padding: 60px; text-align: center; color: #444; font-size: 0.8rem; }
    </style>
</head>
<body>

<div class="sea-container">
    <svg class="wave-svg" viewBox="0 0 2000 1000" preserveAspectRatio="none">
        <path id="w1" stroke="rgba(0, 113, 227, 0.7)" />
        <path id="w2" stroke="rgba(0, 113, 227, 0.4)" />
    </svg>
</div>

<nav>
    <div class="logo" onclick="irParaHome()"> iStore</div>
    <div class="nav-search" id="navSearch">
        <input type="text" placeholder="Buscar modelo..." oninput="syncSearch(this)">
    </div>
    <div style="min-width: 50px;"></div>
</nav>

<div class="container" id="shop-view">
    <h1 id="main-title" style="text-align:center; font-size: 3rem; margin-bottom: 20px;">iStore</h1>
    <div class="search-filter-container" id="mainSearchContainer">
        <input type="text" class="search-box" id="inputPesquisa" placeholder="Buscar modelo..." oninput="syncSearch(this)">
        <div class="filter-group">
            <button class="filter-btn active" onclick="setFiltro('Todos', this)">Todos</button>
            <button class="filter-btn" onclick="setFiltro('Novo', this)">Novos</button>
            <button class="filter-btn" onclick="setFiltro('Seminovo', this)">Seminovos</button>
        </div>
    </div>
    <div class="grid" id="vitrine-produtos"></div>
</div>

<div id="product-page">
    <div style="max-width: 1000px; margin: 0 auto;">
        <button onclick="irParaHome()" style="background:none; border:none; color:var(--apple-blue); cursor:pointer; font-size: 1.1rem; margin-bottom: 30px;">← Voltar</button>
        <div id="product-content"></div>
    </div>
</div>

<div id="login-section">
    <div class="admin-form">
        <h2 style="text-align:center">Painel Admin</h2>
        <input type="password" id="admin-pass" placeholder="Senha ADM">
        <button onclick="validarLogin()" style="width:100%; padding:15px; background:var(--apple-blue); color:white; border:none; border-radius:10px; cursor:pointer;">Entrar</button>
        <p onclick="fecharModais()" style="text-align:center; color:red; cursor:pointer; margin-top:15px;">Cancelar</p>
    </div>
</div>

<div id="admin-section">
    <div class="admin-form">
        <h2>Adicionar iPhone</h2>
        <input type="text" id="nome_adm" placeholder="Nome do Aparelho">
        <input type="number" id="preco_adm" placeholder="Preço">
        <select id="cat_adm" onchange="toggleBateriaAdmin()">
            <option value="Novo">Novo</option>
            <option value="Seminovo">Seminovo</option>
        </select>
        <div id="bateria_admin_container" style="display:none">
            <input type="number" id="bateria_adm" placeholder="Bateria %">
        </div>
        <input type="file" id="foto_adm" accept="image/*">
        <textarea id="desc_adm" placeholder="Especificações"></textarea>
        <button onclick="salvarProduto()" style="width:100%; padding:15px; background:var(--apple-blue); color:white; border:none; border-radius:10px; cursor:pointer;">Publicar</button>
        <div id="lista-admin" style="margin-top:20px"></div>
        <button onclick="fecharModais()" style="width:100%; margin-top:20px; background:#333; color:white; border:none; padding:10px; border-radius:10px; cursor:pointer;">Sair</button>
    </div>
</div>

<footer><p onclick="abrirLogin()" style="cursor:pointer">© 2026 iStore Brasil</p></footer>

<script>
    const aparelhosIniciais = [
        { id: 1, nome: "iPhone 16 Pro Max", preco: 9800, categoria: "Novo", imagem: "515Wx515H-DGAP2368-1-.jpg", info: "Tela 6.9, Chip A18 Pro." },
        { id: 2, nome: "iPhone 15", preco: 4900, categoria: "Novo", imagem: "iphone 15.avif", info: "USB-C, Dynamic Island." },
        { id: 3, nome: "iPhone 14 Pro", preco: 5600, categoria: "Seminovo", bateria: 88, imagem: "iphone14pro.jpg", info: "Câmera 48MP." },
        { id: 4, nome: "iPhone 14", preco: 3900, categoria: "Seminovo", bateria: 91, imagem: "iphone 14.avif", info: "Chip A15." }
    ];

    let produtos = JSON.parse(localStorage.getItem('istore_data')) || aparelhosIniciais;
    let imagemTmp = "";
    let filtroAtual = "Todos";

    function syncSearch(input) {
        document.getElementById('inputPesquisa').value = input.value;
        document.querySelector('.nav-search input').value = input.value;
        filtrarProdutos();
    }

    function handleScroll() {
        if (document.getElementById('shop-view').style.display === 'none') return;
        const navSearch = document.getElementById("navSearch");
        const mainSearch = document.getElementById("mainSearchContainer");
        const title = document.getElementById("main-title");
        if (window.scrollY > 120) { 
            navSearch.classList.add("visible");
            mainSearch.classList.add("hidden"); 
            title.style.opacity = "0";
        } else {
            navSearch.classList.remove("visible");
            mainSearch.classList.remove("hidden"); 
            title.style.opacity = "1";
        }
    }
    window.onscroll = handleScroll;

    function setFiltro(tipo, btn) {
        filtroAtual = tipo;
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        filtrarProdutos();
    }

    function filtrarProdutos() {
        const termo = document.getElementById('inputPesquisa').value.toLowerCase();
        const vitrine = document.getElementById('vitrine-produtos');
        vitrine.innerHTML = '';
        produtos.filter(p => (filtroAtual === 'Todos' || p.categoria === filtroAtual) && p.nome.toLowerCase().includes(termo)).forEach(p => {
            vitrine.innerHTML += `
                <div class="card" onclick="verAparelho(${p.id})">
                    <span class="badge ${p.categoria === 'Seminovo' ? 'badge-seminovo' : 'badge-novo'}">${p.categoria}</span>
                    <div class="img-container"><img src="${p.imagem}"></div>
                    <div class="product-info"><h3>${p.nome}</h3><div class="price">R$ ${p.preco.toLocaleString('pt-BR')}</div></div>
                    <button class="btn-details">Ver Detalhes</button>
                </div>`;
        });
        atualizarListaAdmin();
    }

    function verAparelho(id) {
        const p = produtos.find(i => i.id === id);
        document.getElementById('shop-view').style.display = 'none';
        document.getElementById('product-page').style.display = 'block';
        window.scrollTo(0,0);
        const bateriaHtml = p.bateria ? `<li><span>Bateria</span><b>${p.bateria}%</b></li>` : '';
        document.getElementById('product-content').innerHTML = `
            <div style="display:flex; flex-wrap:wrap; gap:50px; justify-content: center;">
                <div style="background:#fff; padding:30px; border-radius:30px; width:100%; max-width:400px;"><img src="${p.imagem}" style="width:100%; height:auto; object-fit: contain;"></div>
                <div style="flex:1; min-width:320px; color:white;">
                    <h1 style="font-size:clamp(1.8rem, 5vw, 3rem); margin:10px 0">${p.nome}</h1>
                    <div style="font-size:2.5rem; font-weight:700; color:var(--apple-blue); margin-bottom:20px;">R$ ${p.preco.toLocaleString('pt-BR')}</div>
                    <ul class="specs-list"><li><span>Condição</span><b>${p.categoria}</b></li>${bateriaHtml}<li><span>Detalhes</span><b>${p.info}</b></li></ul>
                    <a href="https://wa.me/5562999999999" target="_blank" style="background:#25d366; color:white; padding:20px; display:block; text-align:center; text-decoration:none; border-radius:15px; font-weight:bold;">WhatsApp</a>
                </div>
            </div>`;
    }

    function irParaHome() { 
        document.getElementById('shop-view').style.display = 'block'; 
        document.getElementById('product-page').style.display = 'none'; 
        window.scrollTo(0,0);
        setTimeout(handleScroll, 10);
        filtrarProdutos();
    }

    function abrirLogin() { document.getElementById('login-section').style.display = 'block'; }
    function fecharModais() { document.getElementById('login-section').style.display = 'none'; document.getElementById('admin-section').style.display = 'none'; }
    
    function validarLogin() {
        if(document.getElementById('admin-pass').value === "admin123") {
            document.getElementById('login-section').style.display = 'none';
            document.getElementById('admin-section').style.display = 'block';
        } else { alert("Senha incorreta"); }
    }

    function toggleBateriaAdmin() {
        document.getElementById('bateria_admin_container').style.display = (document.getElementById('cat_adm').value === 'Seminovo') ? 'block' : 'none';
    }

    document.getElementById('foto_adm').addEventListener('change', function(e) {
        const reader = new FileReader();
        reader.onload = function() { imagemTmp = reader.result; };
        reader.readAsDataURL(e.target.files[0]);
    });

    function salvarProduto() {
        const nome = document.getElementById('nome_adm').value;
        const preco = document.getElementById('preco_adm').value;
        if(!nome || !preco || !imagemTmp) return alert("Preencha tudo");
        produtos.push({ id: Date.now(), nome, preco: parseFloat(preco), categoria: document.getElementById('cat_adm').value, bateria: document.getElementById('bateria_adm').value, imagem: imagemTmp, info: document.getElementById('desc_adm').value });
        localStorage.setItem('istore_data', JSON.stringify(produtos));
        location.reload();
    }

    function removerProduto(id) {
        if(confirm("Excluir item?")) {
            produtos = produtos.filter(p => p.id !== id);
            localStorage.setItem('istore_data', JSON.stringify(produtos));
            filtrarProdutos();
        }
    }

    function atualizarListaAdmin() {
        const lista = document.getElementById('lista-admin');
        if(!lista) return; lista.innerHTML = '';
        produtos.forEach(p => { lista.innerHTML += `<div class="admin-item"><span>${p.nome}</span><button onclick="removerProduto(${p.id})" style="color:red; background:none; border:none; cursor:pointer;">Remover</button></div>`; });
    }

    function generateSeamlessWave(id, yOffset, amp, freq) {
        let d = `M 0 ${yOffset}`;
        for (let x = 0; x <= 2000; x += 5) {
            let y = yOffset + amp * Math.sin((x / 2000) * (2 * Math.PI * freq));
            d += ` L ${x} ${y}`;
        }
        document.getElementById(id).setAttribute('d', d);
    }

    window.onload = () => {
        generateSeamlessWave('w1', 400, 50, 2);
        generateSeamlessWave('w2', 450, 30, 3);
        filtrarProdutos();
    };
</script>
</body>
</html>